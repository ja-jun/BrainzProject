<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.brainz.ja.mapper.NotificationSQLMapper">

	<select id="getNotificationList" resultType="com.brainz.ja.vo.NotificationVo">	
		<!-- 		
		SELECT * FROM FP_Board , FP_Member
		WHERE FP_Board.member_no = FP_Member.member_no
		AND FP_Member.member_nick LIKE '%브리%'
		ORDER BY FP_Board.board_no DESC;
 		-->		
		SELECT bps.* FROM BP_notification bps 
			<if test="searchWord !=null">
				WHERE nc_title iLIKE '%'||#{searchWord}||'%' OR nc_content iLIKE '%'||#{searchWord}||'%'
			</if>
 	</select>
 	
 	<insert id="insertNotification">
		INSERT into BP_notification values(
			nextval('BP_notification_seq'),
			#{user_no},
			#{nc_title},
			#{nc_content},
			#{nc_readCount},
			now()
		)
	</insert>
 	
 	<update id="updateNotification">
		UPDATE BP_notification
		SET nc_title=#{nc_title}, nc_content=#{nc_content}
		WHERE nc_no=#{nc_no} 
	</update>

	<delete id="deleteNotification">
		DELETE FROM BP_notification
		WHERE nc_no=#{nc_no}
	</delete>
 	
 	<select id="getNotification" resultType="com.brainz.ja.vo.NotificationVo">
		SELECT * FROM BP_notification
		WHERE nc_no=#{nc_no}
	</select>
 	
 	<!-- 조회수  -->
 	<update id="increaseReadCount"> 		
		UPDATE BP_notification
		SET nc_readCount=nc_readCount+1
		WHERE nc_no=#{nc_no} 	 
 	</update> 	

</mapper>
